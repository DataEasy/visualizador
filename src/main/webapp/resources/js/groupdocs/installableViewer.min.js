!function(e){e.widget("ui.groupdocsViewer",{_viewModel:null,options:{enableViewerInit:!0,supportTextSelection:!0,resourcePrefix:""},_create:function(){e.extend(this.options,{element:this.element,applicationPath:e.ui.groupdocsViewer.prototype.applicationPath,widgetInstance:this}),this._viewModel=this.getViewModel()},getViewModel:function(){return null==this._viewModel&&(this._viewModel=this._createViewModel()),this._viewModel},_createViewModel:function(){return new window.groupdocs.groupdocsViewerViewModel(this.options)},on:function(e,i){this.element.on(e,i)},off:function(e,i){this.element.off(e,i)},setWidth:function(e){this._viewModel.setWidth(e)},setHeight:function(e){this._viewModel.setHeight(e)},openNextPage:function(){this._viewModel.openNextPage()},openPreviousPage:function(){this._viewModel.openPreviousPage()},setPage:function(e){this._viewModel.setPage(e)},openFirstPage:function(){this._viewModel.openFirstPage()},openLastPage:function(){this._viewModel.openLastPage()},showFileBrowser:function(){this._viewModel.showFileBrowser()},setViewerMode:function(e){this._viewModel.setViewerMode(e)},zoomIn:function(){this._viewModel.zoomIn()},zoomOut:function(){this._viewModel.zoomOut()},setZoom:function(e){this._viewModel.setZoom(e)},downloadDocument:function(){this._viewModel.downloadDocument()},printDocument:function(){this._viewModel.printDocument()},searchForward:function(e,i,o,t){this._viewModel.searchForward(e,i,o,t)},searchBackward:function(e,i,o,t){this._viewModel.searchBackward(e,i,o,t)},clearSearchValue:function(){this._viewModel.clearSearchValue()},getDocumentPageCount:function(){return this._viewModel.getDocumentPageCount()},loadDocument:function(e){this._viewModel.loadDocument(e)},rotateCurrentPage:function(e){this._viewModel._rotatePage(e)},setLoadingState:function(e){this._viewModel.setLoadingState(e)},getContentControlDescriptions:function(){return this._viewModel.getContentControlDescriptions()},navigateToContentControl:function(e){this._viewModel.navigateToContentControl(e)},destroy:function(){this._viewModel.destroy()}}),window.groupdocs||(window.groupdocs={}),window.groupdocs.groupdocsViewerViewModel=function(i){e.extend(this,i),this._create(i)},e.extend(window.groupdocs.groupdocsViewerViewModel.prototype,{groupdocsViewerWrapper:null,browserIsInternetExplorer:!1,resizeTimeoutId:null,viewModes:{ScrollMode:1,BookMode:2},viewMode:null,licElement:null,printImageElements:null,_create:function(e){this._model=new i(e),this._init(e)},_init:function(i){function o(){p._localizeElements()}function t(){s.showThumbnails&&null!=s.thumbsImageBase64Encoded&&U.css("background-image","url(data:image/png;base64,"+s.thumbsImageBase64Encoded+")").css("background-position","0 0")}function n(e,i,o){for(var t=["-moz-","-webkit-",""],n=e+"{",r=0;r<t.length;r++)n+=t[r]+i+":"+o+";";return n+="}"}var r,a=this.element;this.viewerId=window.groupdocs.viewerId;var s=e.extend({hostUrl:this.applicationPath,docViewerId:"docViewer"+this.viewerId},i);if(this.printImageElements=[],window.groupdocs.viewerId++,i.enableViewerInit){var l,d=!1;e.browser.msie&&(this.browserIsInternetExplorer=!0,8==e.browser.version&&(d=!0),l=".grpdx input[type='text']::-ms-clear {display: none;}",e("<style>"+l+"</style>").appendTo("head"));var c="grpdx"+s.docViewerId,p=this,h="";p.browserIsInternetExplorer&&s.useHtmlBasedEngine&&(h=" ie",d&&(h+=" ie8"));var w="";s.showHeader||(w='style="display: none"'),a.each(function(){e('<div dir="ltr" class="groupdocs_viewer_wrapper grpdx '+c+'"><div class="viewer_header header_sidescroll" '+w+'>   <div class="viewer_header_wrapper">      <a class="btnOpen new_head_tools_btn h_t_i_browser" data-tooltip="Open File" data-localize-tooltip="OpenFile"></a>      <div name="printAndDownloadToolbar" class="new_head_tools_wrapper left">          <a class="new_head_tools_btn h_t_i_download btn_download" data-tooltip="Download" data-localize-tooltip="Download"></a>          <a class="new_head_tools_btn h_t_i_print print_button" data-tooltip="Print" data-localize-tooltip="Print"></a>      </div>      <div class="navigation-bar'+(d?" ie8":"")+'">      </div>      <div class="new_head_tools_wrapper zoom_wrappper">      </div>      <div class="new_head_tools_dropdown_wrapper viewTypeMenu">			<a class="new_head_tools_btn head_tool_dropdown_btn h_t_i_singlepage" data-bind="click: toggleDropDownMenu" href="#" data-tooltip="View Mode" data-localize-tooltip="ViewMode"></a>			<ul class="dropdown-menu head_tool_dropdown" style="display: none;" data-bind="style: {display: (dropDownMenuIsVisible() ? \'block\' : \'none\')}">				<li style="display: inline">					<a data-bind="click: openScrollView" href="#">						<span class="h_t_d_i_scroll"></span>						<p data-localize="ScrollView">Scroll View</p>					</a>				</li>				<li style="display: inline" name="openDoublePageFlipViewMenuItem">					<a data-bind="click: openDoublePageFlipView" href="#">						<span class="h_t_d_i_double"></span>						<p data-localize="BookMode">Double Page Flip</p>					</a>				</li>				<li style="display: inline">					<a data-bind="click: openOnePageInRowView" href="#">						<span class="h_t_d_i_scroll"></span>						<p data-localize="OnePageInRow">One Page in Row</p>					</a>				</li>				<li style="display: inline">					<a data-bind="click: openTwoPagesInRowView" href="#">						<span class="h_t_d_i_double"></span>						<p data-localize="TwoPagesInRow">Two Pages in Row</p>					</a>				</li>				<li style="display: inline">					<a data-bind="click: openCoverThenTwoPagesInRowView" href="#">						<span class="h_t_d_i_double"></span>						<p data-localize="CoverThenTwoPagesInRow">Cover then Two Pages in Row</p>					</a>				</li>			</ul>		</div>      <div name="search_wrapper" class="new_head_tools_wrapper" data-bind="visible:visible">      </div>'+(s.supportPageRotation?'<div class="new_head_tools_wrapper">      <a name="rotateClockwise" class="h_t_i_rotatecl new_head_tools_btn" data-tooltip="Rotate Clockwise" data-localize-tooltip="RotateClockwise"></a>      <a name="rotateCounterClockwise" class="h_t_i_rotatecon new_head_tools_btn" data-tooltip="Rotate Counter-Clockwise" data-localize-tooltip="RotateCounterClockwise"></a></div>':"")+'   </div></div><div class="fileOpenDialogWrapper" style="display: none"></div><div class="viewer_mainwrapper '+h+'">   <div id='+s.docViewerId+' class="doc_viewer" data-bind="event: { scroll: function(item, e) { this.ScrollDocView(item, e); }, scrollstop: function(item, e) { this.ScrollDocViewEnd(item, e);e.returnValue = false;return true; } }">   </div>   <div class="doc_viewer_wrapper_page_flip" style="overflow: auto; top: -50000px; position: absolute;height: 100%">   </div>'+(s.showThumbnails?'   <a class="thumbs_btn" href="#"></a>':"")+'</div><div name="jGDerror" class="modal_dialog_wrapper jerrorwrapper">   <div class="modal_dialog_overlay">       &nbsp;   </div>   <div class="modal_dialog_content_wrapper">       <div class="modal_dialog_header">          Error       </div>       <div class="modal_dialog_content">       </div>   </div></div><div name="messageDialog" class="modal_dialog_content_wrapper modal_progressbar" style="display:none">   <a name="minimizeButton" class="icon_minimize" href="#">&ndash;</a>   <a name="maximizeButton" class="icon_maximize" href="#">+</a>   <div class="modal_dialog_header">      <span name="alwaysVisibleTitle">Printing </span>      <span name="visibleWhenMinimizedTitle" class="percent">0%</span>   </div>   <div class="modal_dialog_content">      <p name="message">Preparing page </p>      <div class="progressbar">      <div style="width: 50%" class="progress"></div></div>   </div></div></div>').appendTo(e(this))})}this.groupdocsViewerWrapper=r=a.find(".groupdocs_viewer_wrapper");var u=this.viewerHeader=r.find(".viewer_header"),g=this.viewerMainWrapper=r.find(".viewer_mainwrapper");if(s.showHeader||(u.height(0),g.css("top","0")),i.enableViewerInit){""==s.filePath&&(s.openThumbnails=!1);var m="#"+s.docViewerId,v=e(m),f=r.find("[name='search_wrapper']");s.useHtmlBasedEngine&&(u.find("li[name='openDoublePageFlipViewMenuItem']").hide(),s.supportTextSelection||(l="."+c+" .html_pages_container{-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}",e("<style>"+l+"</style>").appendTo("head"),this.browserIsInternetExplorer&&v.on("selectstart",function(e){return e.preventDefault(),!0})),s.supportPageReordering=!1);var _,b;_=s.width?s.width:a.width(),r.width(_),b=s.height?s.height:a.height(),r.height(b);var V=null;s.useHtmlBasedEngine||(V=r.find("[name='selection-content']"),0==V.length&&(V=e("<textarea readonly='readonly' rows='1' cols='1' name='selection-content'></textarea>'").appendTo(r)));var P=r.find("[name='jGDerror']");P.find(".modal_dialog_overlay").click(function(){P.hide()});var M=r.find(".navigation-bar"),D=r.find(".zoom_wrappper"),C=r.find(".doc_viewer_wrapper_page_flip"),y=this.fileOpenDialogWrapper=r.find(".fileOpenDialogWrapper");if(!s.supportTextSelection){var I=m+" .ui-selectable-helper {display: none;visibility: hidden}";e("<style>"+I+"</style>").appendTo("head")}var S;if(s.thumbnailsContainerWidth){var k=203,T=150,F=187,A=this.getScrollbarWidth(),H=Math.round(s.thumbnailsContainerWidth),x=(k-A)/(H-A);S=Math.round(T/x);var z=Math.round(F/x);l="div.thumbnailsContainer{width:"+H+"px}",l+="div.thumbnailsContainer ul li img{width:"+S+"px}",l+="div.thumbnailsContainer ul li{min-width:"+z+"px}",l+=".thumbs_btn_slide{left:"+(H+2)+"px}",e("<style>"+l+"</style>").appendTo("head")}l="",s.searchHighlightColor&&(l+="."+c+" .search_highlight_html, ."+c+" .search-highlight {background-color:"+s.searchHighlightColor+"; fill:"+s.searchHighlightColor+"}"),s.currentSearchHighlightColor&&(l+=".grpdx."+c+" .current_search_highlight {background-color:"+s.currentSearchHighlightColor+"; fill:"+s.currentSearchHighlightColor+"}"),s.useEmScaling&&(l+=".grpdx."+c+" .html_page_contents {transform-origin:initial}"),l&&e("<style>"+l+"</style>").appendTo("head"),v.bind("onHtmlCreated",o),M.bind("onHtmlCreated",o),D.bind("onHtmlCreated",o),C.bind("onHtmlCreated",o),y.bind("onHtmlCreated",o);var W,B={createHtml:!0,viewerElement:v,useCaseSensitiveSearch:s.useCaseSensitiveSearch,searchForSeparateWords:s.searchForSeparateWords,treatPhrasesInDoubleQuotesAsExactPhrases:s.treatPhrasesInDoubleQuotesAsExactPhrases,useHtmlBasedEngine:s.useHtmlBasedEngine,searchIsVisible:s.showSearch,useRtl:s.useRtl,useAccentInsensitiveSearch:s.useAccentInsensitiveSearch,useVirtualScrolling:s.useVirtualScrolling},E={createHtml:!0,thumbnailWidth:S,quality:100,useHtmlBasedEngine:s.useHtmlBasedEngine,useHtmlThumbnails:s.useHtmlThumbnails,useInnerThumbnails:s.useInnerThumbnails,supportPageReordering:s.supportPageReordering,use_pdf:s.supportTextSelection?"true":"false",ignoreDocumentAbsence:s.ignoreDocumentAbsence,supportPageRotation:s.supportPageRotation,showThumbnails:s.openThumbnails};W=s.showThumbnails?g:null;var R={watermarkText:s.watermarkText,watermarkColor:s.watermarkColor,watermarkPosition:s.watermarkPosition,watermarkWidth:s.watermarkFontSize,preventTouchEventsBubbling:s.preventTouchEventsBubbling,searchForSeparateWords:s.searchForSeparateWords,treatPhrasesInDoubleQuotesAsExact:s.treatPhrasesInDoubleQuotesAsExact,usePngImagesForHtmlBasedEngine:s.usePngImagesForHtmlBasedEngine,alwaysOnePageInRow:s.showOnePageInRow||s.viewerStyle==window.groupdocs.OnePageInRow,onlyShrinkLargePages:s.onlyShrinkLargePages,loadAllPagesOnSearch:s.loadAllPagesOnSearch,useEmScaling:s.useEmScaling,convertWordDocumentsCompletely:s.convertWordDocumentsCompletely,ignoreDocumentAbsence:s.ignoreDocumentAbsence,usePdf:s.supportTextSelection,preloadPagesOnBrowserSide:s.preloadPagesOnBrowserSide,supportPageRotation:s.supportPageRotation,useAccentInsensitiveSearch:s.useAccentInsensitiveSearch,useRtl:s.useRtl,viewerLayout:s.viewerStyle,useVirtualScrolling:s.useVirtualScrolling,supportListOfContentControls:s.supportListOfContentControls,supportListOfBookmarks:s.supportListOfBookmarks,embedImagesIntoHtmlForWordFiles:s.embedImagesIntoHtmlForWordFiles},O="onMenuClicked",L=r.find(".viewTypeMenu"),j={dropDownMenuIsVisible:ko.observable(!1),dropDownMenuClicked:!1,openScrollView:function(){p.setMultiplePagesInRowLayout()},openDoublePageFlipView:function(){p.openDoublePageFlipView()},openOnePageInRowView:function(){p.openOnePageInRowView()},openTwoPagesInRowView:function(){p.openTwoPagesInRowView()},openCoverThenTwoPagesInRowView:function(){p.openCoverThenTwoPagesInRowView()},showDropDownMenu:function(e){this.dropDownMenuIsVisible(e)},toggleDropDownMenu:function(e,i){this.dropDownMenuIsVisible(!this.dropDownMenuIsVisible()),this.dropDownMenuClicked=!0,L.trigger(O),i.stopPropagation()}},N=this.viewerAdapter=new DocViewerAdapter({fileId:s.filePath,fileVersion:"0",quality:s.quality,use_pdf:s.supportTextSelection?"true":"false",docSpace:v,_mode:"webComponent",createHtml:!0,initialZoom:s.initialZoom,viewerWidth:_,viewerHeight:g.height(),docViewerId:s.docViewerId,zoomToFitWidth:s.zoomToFitWidth,zoomToFitHeight:s.zoomToFitHeight,navigation:M,navigationOptions:{createHtml:!0},thumbnails:W,thumbnailsOptions:E,zooming:D,zoomingOptions:{createHtml:!0},search:f,searchOptions:B,preloadPagesCount:s.preloadPagesCount,docSpacePageFlip:s.useHtmlBasedEngine||s.viewerStyle==this.viewModes.ScrollMode&&!s.showViewerStyleControl?null:C,usePageNumberInUrlHash:!1,selectionContent:V,imageHorizontalMargin:14,imageVerticalMargin:14,useJavaScriptDocumentDescription:!0,searchPartialWords:!0,variableHeightPageSupport:!0,textSelectionSynchronousCalculation:!1,minimumImageWidth:s.minimumImageWidth,fileDisplayName:s.fileDisplayName,pageContentType:s.useHtmlBasedEngine?"html":"image",searchExactText:s.searchExactText,viewerOptions:R,viewTypeMenu:L,viewTypeViewModel:j});if(s.showFolderBrowser){var Z={hostUrl:s.hostUrl,userId:s.userId,userKey:s.userKey,fileExplorer:r.find(".file_browser_content"),fileUploader:r.find(".file_browser_toolbar"),resourcePrefix:s.resourcePrefix,urlHashEnabled:!1};y.fileOpenDialog(Z),y.find(".popclose").click(function(){p._hideFileOpenDialog()})}o();var U=a.find(".thumbs_btn");s.useInnerThumbnails&&U.hide(),t(),U.click(function(){return e(this).toggleClass("thumbs_btn_slide"),a.find(".thumbnailsContainer").toggle(),e.browser.msie&&(U.css("background-image",""),t()),!1}),r.find(".btnOpen").click(function(){p._showFileOpenDialog()}),r.find("[name=rotateClockwise]").click(function(){p._rotatePage(90)}),r.find("[name=rotateCounterClockwise]").click(function(){p._rotatePage(-90)}),r.find(".file_browser_content").bind("fileSelected",function(e,i){p._hideFileOpenDialog(),p.fileDisplayName=N.docViewerViewModel.fileDisplayName="",N.docViewerViewModel.loadDocument(i.guid)}),s.showThumbnails&&s.openThumbnails&&(a.find(".thumbs_btn").addClass("thumbs_btn_slide"),a.find(".thumbnailsContainer").css("display","block")),ko.applyBindings(j,L.get(0)),e("html").click(function(){p.viewerAdapter.zoomViewModel&&p.viewerAdapter.zoomViewModel.showDropDownMenu(!1),j.showDropDownMenu(!1)}),s.backgroundColor&&(a.find(".groupdocs_viewer_wrapper").css("background-color",s.backgroundColor),u.css("background-color",s.backgroundColor),a.find(".new_head_input").css("background-color",s.backgroundColor),a.find(".new_head_tools_wrapper").css("background-color",s.backgroundColor).css("box-shadow","none"),a.find(".thumbs_btn").css("background-color",s.backgroundColor)),a.find(".btnOpen").css("display",s.showFolderBrowser?"":"none"),a.find(".navigation-bar").css("display",s.showPaging?"":"none"),D.css("display",s.showZoom?"":"none"),a.find(".btn_download").css("display",s.showDownload?"":"none"),a.find(".print_button").css("display",s.showPrint?"":"none"),a.find(".viewTypeMenu").css("display",s.showViewerStyleControl?"":"none"),s.showPrint===!1&&s.showDownload===!1&&a.find("[name='printAndDownloadToolbar']").css("display","none"),s.showSearch===!1&&f.css("display","none");var Q="";if(s.toolbarButtonsBoxShadowStyle){var G="box-shadow",q=n(".grpdx .new_head_tools_btn",G,s.toolbarButtonsBoxShadowStyle);Q+=q,s.toolbarButtonsBoxShadowHoverStyle&&(q=n(".grpdx .new_head_tools_btn:hover",G,s.toolbarButtonsBoxShadowHoverStyle),Q+=q)}s.thumbnailsContainerBackgroundColor&&(Q+=".grpdx div.thumbnailsContainer{background-color:"+s.thumbnailBackgroundColor+"}\r\n"),s.toolbarBorderBottomColor&&(Q+=".grpdx .viewer_header{border-bottom-color:"+s.toolbarBorderBottomColor+"}\r\n"),s.thumbnailsContainerBorderRightColor&&(Q+=".grpdx div.thumbnailsContainer{border-right-color:"+s.thumbnailsContainerBorderRightColor+"}\r\n"),s.toolbarInputFieldBorderColor&&(Q+=".grpdx .new_head_input{border-color:"+s.toolbarInputFieldBorderColor+"}\r\n"),s.toolbarButtonBorderColor&&(Q+=".grpdx .new_head_tools_btn{border-color:"+s.toolbarButtonBorderColor+"}\r\n"),s.useInnerThumbnails&&(Q+=".grpdx #"+s.docViewerId+"{display: inline-block}\r\n"),e("<style>"+Q+"</style>").appendTo("head"),v.bind("onDocumentLoadComplete",function(e,i){p.documentLoadCompleteHandler(i,r,g)}),v.bind("onDocumentLoaded",function(e,i){p.documentLoadedHandler(i,r,g)}),v.bind("isDocumentSinglePaged.groupdocs",function(e,i){p.documentSinglePagedHandler(i,M)}),s.viewerStyle==this.viewModes.BookMode?j.openDoublePageFlipView():this.viewMode=this.viewModes.ScrollMode;var J=r.find("[name='jGDerror']"),$=J.find(".modal_dialog_content"),K=J.find(".modal_dialog_content_wrapper"),Y=J.find(".modal_dialog_header");J.removeClass("jerrorwrapper");var X=r.find(".viewer_mainwrapper");window.jGDError=function(i){if(e(a).trigger("error.groupdocs",i),s.enableStandardErrorHandling){var o=r.find(".btn_download");o.unbind(),o.bind({click:function(){return p._downloadDocument(),!1}}),i=i.replace(/^[\r\n\s]+|[\r\n\s]+$/g,""),i||(i="Sorry, we're unable to perform your request right now. Please try again later."),J.css("height","auto"),Y.text("Error");var t,n;if("<"==i.substring(0,1)){$.html(i);var l=X.width(),d=X.height();t=100>l?l:l-100,n=100>d?d:d-100}else $.text(i);void 0!=t&&(K.css("margin-left",-t/2),K.width(t)),void 0!=n&&K.height(n),J.show(),K.css("margin-left",-K.width()/2),K.css("margin-top",-K.height()/2)}};var ei=this.groupdocsViewerWrapper.find("[name='messageDialog']"),ii=ei.find("[name='minimizeButton']"),oi=ei.find("[name='maximizeButton']");ii.click(function(){ei.addClass("min")}),oi.click(function(){ei.removeClass("min")}),this.resizeHandler()}},documentLoadedHandler:function(i,o,t){this.printFrameLoaded=!1;var n=e("body"),r="printFrame"+this.viewerId,a=n.children("div.groupdocsPrintFrame[name='"+r+"'],div.groupdocsPrintFrameDeactivated[name='"+r+"']");0==a.length?(a=e("<div class='groupdocsPrintFrameDeactivated'></div>"),a.attr("name",r),a.appendTo(n)):a.empty(),this.printImageElements.length=0;for(var s,l=i.page_count,d=0;l>d;d++)s=e("<img/>").appendTo(a),this.printImageElements.push(s);i.lic||0!=o.find(".licBanner").length||(t.addClass("viewer_mainwrapper_trial"),this.licElement=e("<div/>"),this.licElement.addClass("banner_trial"),!this.showHeader&&this.licElement.css("top","0"),this.licElement.html("This viewer has been created using an unlicensed version of <a href='http://groupdocs.com' target='_blank'>GroupDocs</a> Viewer for Java v2.11.0 "),this.licElement.appendTo(o),!this.showHeader&&t.css("top",this.licElement.height()+"px"))},documentLoadCompleteHandler:function(e,i){var o=this;this.showImageWidth&&alert("Image width: "+e.page_size.Width),this.downloadUrl=e.url,this.pdfDownloadUrl=e.pdfDownloadUrl,this.pdfPrintUrl=e.pdfPrintUrl,this.documentPath=e.guid;var t=i.find(".btn_download"),n=i.find(".print_button");t.unbind(),n.unbind(),t.bind({click:function(){return o._downloadDocument(),!1}}),n.bind({click:function(){return o._printDocument(),!1}})},documentSinglePagedHandler:function(e,i){this.showPaging&&(e?i.hide():i.show())},_localizeElements:function(){var i=this;null!=this.localizedStrings&&i.element.find("[data-localize],[data-localize-ph],[data-localize-tooltip]").each(function(){var o,t=e(this),n=t.attr("data-localize");n?(o=i.localizedStrings[n],t.text(o)):(n=t.attr("data-localize-ph"),n?(o=i.localizedStrings[n],t.attr("placeholder",o)):(n=t.attr("data-localize-tooltip"),n&&(o=i.localizedStrings[n],t.attr("data-tooltip",o))))})},getScrollbarWidth:function(){var i=null,o=e("<div/>").css("width","100px").css("height","100px").css("overflow","scroll").css("position","absolute").css("top","-9999px"),t=o[0];return document.body.appendChild(t),i=t.offsetWidth-t.clientWidth,document.body.removeChild(t),i},resizeHandler:function(){if(this.showHeader){var e=this.viewerHeader.outerHeight(!0),i=0;if(this.licElement&&(i=this.licElement.height()),e!=this.viewerMainWrapper.position().top-i){var o=e;this.licElement&&(this.licElement.css("top",o.toString()+"px"),o+=i),this.viewerMainWrapper.css("top",o.toString()+"px"),this.viewMode==this.viewModes.BookMode?this.viewerAdapter.docViewerPageFlipViewModel.reInitSelectable():this.viewerAdapter.docViewerViewModel.reInitSelectable()}}if(this.viewMode!=this.viewModes.BookMode&&this.useInnerThumbnails){var t=0,n=this.viewerAdapter.thumbnailsViewModel;n&&(t=n.getThumbnailsPanelWidth()),this.viewerAdapter.docViewerViewModel.resizeViewerElement(t)}else this.viewerAdapter.docViewerViewModel.loadImagesForVisiblePages();this._setFitWidthAndHeightValues()},resizeHandlerWithDelay:function(){this.resizeTimeoutId&&clearTimeout(this.resizeTimeoutId);var e=this;this.resizeTimeoutId=window.setTimeout(function(){e.resizeHandler()},1e3)},setWidth:function(e){this.groupdocsViewerWrapper.width(e),this.resizeHandler(),this.resizeHandlerWithDelay()},setHeight:function(e){this.groupdocsViewerWrapper.height(e),this.resizeHandler(),this.resizeHandlerWithDelay()},_showFileOpenDialog:function(){var i=this;this.fileOpenDialogWrapper.addClass("in"),this.fileOpenDialogWrapper.show(),this.backdrop=e('<div class="modal-backdrop fade" />').appendTo(this.groupdocsViewerWrapper),this.backdrop.click(function(){i._hideFileOpenDialog()}),this.backdrop.addClass("in")},_hideFileOpenDialog:function(){this.backdrop.removeClass("in"),this.backdrop.remove(),this.fileOpenDialogWrapper.hide()},isPageRotationInProgress:!1,_rotatePage:function(e){var i=this;if(!i.isPageRotationInProgress){i.isPageRotationInProgress=!0;var o=this._getLocalizedString("Page rotation in progress...","PageRotationInProgress"),t=this._getLocalizedString("Rotation","Rotation"),n=this._updateMessageDialog(o,t,35);n&&n.show(),this.viewerAdapter.docViewerViewModel.rotatePage(e,function(){n&&n.hide(),i.isPageRotationInProgress=!1})}},openScrollView:function(){var e=this.groupdocsViewerWrapper.find(".doc_viewer"),i=this.groupdocsViewerWrapper.find(".doc_viewer_wrapper_page_flip");i.css("position","absolute"),i.css("height","100%"),i.hide(),e.show(),this.viewerAdapter.docViewerViewModel.openCurrentPage(),this.viewerAdapter.search&&this.viewerAdapter.searchViewModel.showControls()},setMultiplePagesInRowLayout:function(){this.openScrollView(),this.viewerAdapter.docViewerViewModel.setLayout(window.groupdocs.ScrollMode),this.viewerAdapter.docViewerViewModel.reInitSelectable(),this._setFitWidthAndHeightValues(),this.viewMode=this.viewModes.ScrollMode},openDoublePageFlipView:function(){if(!this.useHtmlBasedEngine){var e=this.groupdocsViewerWrapper.find(".doc_viewer"),i=this.groupdocsViewerWrapper.find(".doc_viewer_wrapper_page_flip");i.show(),this.viewerAdapter.docViewerViewModel.setLayout(window.groupdocs.BookMode),this.viewerAdapter.docViewerPageFlipViewModel.openCurrentPage(),i.css("height",""),i.css("top",""),i.css("position",""),e.hide(),this.viewerAdapter.docViewerPageFlipViewModel.reInitSelectable(),this._setFitWidthAndHeightValues(!0),this.viewerAdapter.search&&this.viewerAdapter.searchViewModel.hideControls(),this.viewMode=this.viewModes.BookMode}},openOnePageInRowView:function(){this.openScrollView(),this.viewerAdapter.docViewerViewModel.setLayout(window.groupdocs.OnePageInRow),this.viewerAdapter.docViewerViewModel.reInitSelectable(),!this.useHtmlBasedEngine&&this.viewerAdapter.docViewerViewModel.openCurrentPage()},openTwoPagesInRowView:function(){this.openScrollView(),this.viewerAdapter.docViewerViewModel.setLayout(window.groupdocs.TwoPagesInRow),this.viewerAdapter.docViewerViewModel.reInitSelectable(),!this.useHtmlBasedEngine&&this.viewerAdapter.docViewerViewModel.openCurrentPage()},openCoverThenTwoPagesInRowView:function(){this.openScrollView(),this.viewerAdapter.docViewerViewModel.setLayout(window.groupdocs.CoverThenTwoPagesInRow),this.viewerAdapter.docViewerViewModel.reInitSelectable(),!this.useHtmlBasedEngine&&this.viewerAdapter.docViewerViewModel.openCurrentPage()},_downloadDocument:function(){this.element.trigger("onGDViewerDownloadButtonClick"),this.element.trigger("downloadButtonClick.groupdocs");var i=this.downloadUrl;if(null==i){var o=this._model._portalService._urlSuffix||"";i=this.applicationPath+"/document-viewer/GetFile"+o+"?path="+this.filePath+"&getPdf=false&useHtmlBasedEngine=false&supportPageRotation=false"}return this.downloadPdfFile&&"undefined"!=typeof this.pdfDownloadUrl&&(i=this.pdfDownloadUrl),this.showDownloadErrorsInPopup?e.fileDownload(i,{failCallback:function(e){window.jGDError(e)},cookieName:self.jqueryFileDownloadCookieName,containerElement:this.groupdocsViewerWrapper}):window.location.href=i,!1},_printDocument:function(){if(this.usePdfPrinting){window.open(this.pdfPrintUrl)}else{var i=navigator.userAgent.toLowerCase(),o=i.indexOf("android")>-1;o&&alert("You seem to use an Android device. Your browser does not support the JavaScript print function.");var t="";this.fileDisplayName&&(t=this.fileDisplayName);var n=this,r=this.useHtmlBasedEngine&&!this.useImageBasedPrinting,a=e("body"),s="printFrame"+this.viewerId,l=a.children("div.groupdocsPrintFrame[name='"+s+"'],div.groupdocsPrintFrameDeactivated[name='"+s+"']"),d=a.children("div.groupdocsPrintFrame,div.groupdocsPrintFrameDeactivated").not(l);d.removeClass("groupdocsPrintFrame"),d.addClass("groupdocsPrintFrameDeactivated"),l.removeClass("groupdocsPrintFrameDeactivated"),l.addClass("groupdocsPrintFrame");var c=null,p=null,h=this.watermarkPosition,w=null;if(this.printWithWatermark&&(c=this.watermarkText,p=this.watermarkColor,w=this.watermarkFontSize),0==l.length&&(l=e("<div class='groupdocsPrintFrame'></div>"),l.attr("name",s),l.appendTo(a)),this.printFrameLoaded)window.print();else{var u=this._getLocalizedString("Getting a printable version of the document","GettingPrintableVersionOfDocument"),g=this._getLocalizedString("Printing","Printing");this._showMessageDialog(u,g,0),this._model.getPrintableHtml(this.documentPath,r,t,c,p,h,w,this.ignoreDocumentAbsence,function(i){function o(){s++,n._updateMessageDialog(a+s+"/"+r,g,s/r*100),s>=r&&(window.print(),n.printFrameLoaded=!0,n._hideMessageDialog())}n._hideMessageDialog();var t,r=i.length,a=n._getLocalizedString("Preparing the pages","PreparingPages");a+=": ";var s=0;n._showMessageDialog(a+s+"/"+r,g,0);for(var d=n.printImageElements.length,c=d;r>c;c++){var p;p=e("<img/>").appendTo(l),n.printImageElements.push(p)}for(c=0;c<n.printImageElements.length;c++){var h;t=i[c],h=n.printImageElements[c],h.load(o).attr("src",t)}},function(){n._hideMessageDialog()})}}return!1},_showMessageDialog:function(e,i,o){var t=this._updateMessageDialog(e,i,o);t.show()},_updateMessageDialog:function(e,i,o){var t=this.groupdocsViewerWrapper.find("[name='messageDialog']"),n=t.find(".modal_dialog_content p[name='message']");n.text(e);var r=t.find(".modal_dialog_header"),a=r.find("span[name='alwaysVisibleTitle']");a.text(i);var s=t.find(".progress");if("undefined"!=typeof o){var l=Math.round(o)+"%";s.css("width",l);var d=r.find("span[name='visibleWhenMinimizedTitle']");d.text(l)}return t},_hideMessageDialog:function(){var e=this.groupdocsViewerWrapper.find("[name='messageDialog']");e.hide()},_getLocalizedString:function(e,i){var o=e;if(this.localizedStrings){var t=this.localizedStrings[i];t&&(o=t)}return o},_setFitWidthAndHeightValues:function(e){if(this.viewerAdapter.zooming){var i,o,t,n;e?(t=this.viewerAdapter.docViewerPageFlipViewModel.getFitWidthZoom(),n=this.viewerAdapter.docViewerPageFlipViewModel.getFitHeightZoom()):(i=this.groupdocsViewerWrapper.width(),this.viewerAdapter.docViewerViewModel.setContainerWidth(i),o=this.viewerMainWrapper.height(),this.viewerAdapter.docViewerViewModel.setContainerHeight(o),t=this.viewerAdapter.docViewerViewModel.getFitWidthZoom(),n=this.viewerAdapter.docViewerViewModel.getFitHeightZoom()),this.viewerAdapter.zoomViewModel.setFitWidthZoom(t),this.viewerAdapter.zoomViewModel.setFitHeightZoom(n)}},openNextPage:function(){this.viewerAdapter.navigationViewModel.down()},openPreviousPage:function(){this.viewerAdapter.navigationViewModel.up()},setPage:function(e){this.viewerAdapter.navigationViewModel.selectPage(e)},openFirstPage:function(){this.viewerAdapter.navigationViewModel.openFirstPage()},openLastPage:function(){this.viewerAdapter.navigationViewModel.openLastPage()},showFileBrowser:function(){this._showFileOpenDialog()},setViewerMode:function(e){0==e?this.openScrollView():this.openDoublePageFlipView()},zoomIn:function(){this.viewerAdapter.zoomViewModel.zoomIn()},zoomOut:function(){this.viewerAdapter.zoomViewModel.zoomOut()},setZoom:function(e){var i=e;switch(e){case window.groupdocs.FitWidth:i=this.viewerAdapter.zoomViewModel.getFitWidthZoomValue();break;case window.groupdocs.FitHeight:i=this.viewerAdapter.zoomViewModel.getFitHeightZoomValue()}this.viewerAdapter.zoomViewModel.setZoom({value:i})},downloadDocument:function(){this._downloadDocument()},printDocument:function(){this._printDocument()},searchForward:function(e,i,o,t){this.viewerAdapter.searchViewModel.searchValue()!=e&&(this.viewerAdapter.searchViewModel.searched=!1),this.viewerAdapter.searchViewModel.searchValue(e),this.viewerAdapter.searchViewModel.findNext(i,o,t)},searchBackward:function(e,i,o,t){this.viewerAdapter.searchViewModel.searchValue()!=e&&(this.viewerAdapter.searchViewModel.searched=!1),this.viewerAdapter.searchViewModel.searchValue(e),this.viewerAdapter.searchViewModel.findPrevious(i,o,t)},clearSearchValue:function(){this.viewerAdapter.searchViewModel.clearValue()},getDocumentPageCount:function(){return this.viewerAdapter.docViewerViewModel.pageCount()},loadDocument:function(e){this.viewerAdapter.docViewerViewModel.loadDocument(e)},setLoadingState:function(e){this.viewerAdapter.docViewerViewModel.setLoadingState(e)},getContentControlDescriptions:function(){return this.viewerAdapter.docViewerViewModel.getContentControlDescriptions()},navigateToContentControl:function(e){this.viewerAdapter.docViewerViewModel.navigateToContentControl(e)},destroy:function(){var i=this.groupdocsViewerWrapper.find(".doc_viewer_wrapper_page_flip .pages_container_flip");0!=i.length&&i.turn("is")&&i.turn("destroy"),this.groupdocsViewerWrapper.remove(),e.Widget.prototype.destroy.call(this.widgetInstance)}});var i=function(i){e.extend(this,i),this._init()};e.extend(i.prototype,{_portalService:null,_init:function(){this._portalService=Container.Resolve("PortalService")},getPrintableHtml:function(e,i,o,t,n,r,a,s,l,d){this._portalService.getPrintableHtml(e,i,o,t,n,r,a,s,function(e){l.apply(this,[e.data])},function(e){d.apply(this,[e])})}}),e.support.cors=!0,jQuery.browser||(jQuery.browser={},function(){if(jQuery.browser.msie=!1,jQuery.browser.version=0,"Microsoft Internet Explorer"==navigator.appName)navigator.userAgent.match(/MSIE ([0-9]+)\./)&&(jQuery.browser.msie=!0,jQuery.browser.version=RegExp.$1);else if("Netscape"==navigator.appName){var e=navigator.userAgent,i=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");null!=i.exec(e)&&(jQuery.browser.msie=!0,jQuery.browser.version=RegExp.$1)}}()),window.groupdocs.ScrollMode=1,window.groupdocs.BookMode=2,window.groupdocs.OnePageInRow=3,window.groupdocs.TwoPagesInRow=4,window.groupdocs.CoverThenTwoPagesInRow=5,window.groupdocs.FitWidth=-1,window.groupdocs.FitHeight=-2,window.groupdocs.viewerId=1}(jQuery);