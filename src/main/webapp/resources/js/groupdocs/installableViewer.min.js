!function(e){e.widget("ui.groupdocsViewer",{_viewModel:null,options:{enableViewerInit:!0,supportTextSelection:!0,resourcePrefix:""},_create:function(){e.extend(this.options,{element:this.element,applicationPath:e.ui.groupdocsViewer.prototype.applicationPath,widgetInstance:this}),this._viewModel=this.getViewModel()},getViewModel:function(){return null==this._viewModel&&(this._viewModel=this._createViewModel()),this._viewModel},_createViewModel:function(){var e=new window.groupdocs.groupdocsViewerViewModel(this.options);return e},on:function(e,i){this.element.on(e,i)},off:function(e,i){this.element.off(e,i)},setWidth:function(e){this._viewModel.setWidth(e)},setHeight:function(e){this._viewModel.setHeight(e)},openNextPage:function(){this._viewModel.openNextPage()},openPreviousPage:function(){this._viewModel.openPreviousPage()},setPage:function(e){this._viewModel.setPage(e)},openFirstPage:function(){this._viewModel.openFirstPage()},openLastPage:function(){this._viewModel.openLastPage()},showFileBrowser:function(){this._viewModel.showFileBrowser()},setViewerMode:function(e){this._viewModel.setViewerMode(e)},zoomIn:function(){this._viewModel.zoomIn()},zoomOut:function(){this._viewModel.zoomOut()},setZoom:function(e){this._viewModel.setZoom(e)},downloadDocument:function(){this._viewModel.downloadDocument()},printDocument:function(){this._viewModel.printDocument()},searchForward:function(e,i,o,t){this._viewModel.searchForward(e,i,o,t)},searchBackward:function(e,i,o,t){this._viewModel.searchBackward(e,i,o,t)},clearSearchValue:function(){this._viewModel.clearSearchValue()},getDocumentPageCount:function(){return this._viewModel.getDocumentPageCount()},loadDocument:function(e){this._viewModel.loadDocument(e)},rotateCurrentPage:function(e){this._viewModel._rotatePage(e)},setLoadingState:function(e){this._viewModel.setLoadingState(e)},getContentControlDescriptions:function(){return this._viewModel.getContentControlDescriptions()},navigateToContentControl:function(e){this._viewModel.navigateToContentControl(e)},destroy:function(){this._viewModel.destroy()}}),window.groupdocs||(window.groupdocs={}),window.groupdocs.groupdocsViewerViewModel=function(i){e.extend(this,i),this._create(i)},e.extend(window.groupdocs.groupdocsViewerViewModel.prototype,{groupdocsViewerWrapper:null,browserIsInternetExplorer:!1,browserIsChrome:!1,resizeTimeoutId:null,viewModes:{ScrollMode:1,BookMode:2},viewMode:null,licElement:null,printImageElements:null,_create:function(e){this._model=new i(e),this._init(e)},_init:function(i){function o(){m._localizeElements()}function t(){s.showThumbnails&&null!=s.thumbsImageBase64Encoded&&K.css("background-image","url(data:image/png;base64,"+s.thumbsImageBase64Encoded+")").css("background-position","0 0")}function n(e,i,o){for(var t=["-moz-","-webkit-",""],n=e+"{",r=0;r<t.length;r++)n+=t[r]+i+":"+o+";";return n+="}"}var r,a=this.element;this.viewerId=window.groupdocs.viewerId;var s=e.extend({hostUrl:this.applicationPath,docViewerId:"docViewer"+this.viewerId},i);this.printImageElements=new Array,window.groupdocs.viewerId++;var l=!1;if(i.enableViewerInit){var d,c=!1;e.browser.msie&&(this.browserIsInternetExplorer=!0,(8==e.browser.version||9==e.browser.version)&&(l=!0,8==e.browser.version&&(c=!0)),d=".grpdx input[type='text']::-ms-clear {display: none;}",e("<style>"+d+"</style>").appendTo("head"));var p,h=window.chrome,w=window.navigator.vendor,u=window.navigator.userAgent.indexOf("OPR")>-1;h&&"Google Inc."===w&&0==u&&(p=!0),this.browserIsChrome=p;var g="grpdx"+s.docViewerId,m=this,v="";m.browserIsInternetExplorer&&s.useHtmlBasedEngine&&(v=" ie",c&&(v+=" ie8"));var f="";s.showHeader||(f='style="display: none"'),a.each(function(){e('<div dir="ltr" class="groupdocs_viewer_wrapper grpdx '+g+'"><div class="viewer_header header_sidescroll" '+f+'>   <div class="viewer_header_wrapper">      <a class="btnOpen new_head_tools_btn h_t_i_browser" data-tooltip="Open File" data-localize-tooltip="OpenFile"></a>      <div name="printAndDownloadToolbar" class="new_head_tools_wrapper left">          <a class="new_head_tools_btn h_t_i_download btn_download" data-tooltip="Download" data-localize-tooltip="Download"></a>          <a class="new_head_tools_btn h_t_i_print print_button" data-tooltip="Print" data-localize-tooltip="Print"></a>      </div>      <div class="navigation-bar'+(c?" ie8":"")+'">      </div>      <div class="new_head_tools_wrapper zoom_wrappper">      </div>      <div class="new_head_tools_dropdown_wrapper viewTypeMenu">         <a class="new_head_tools_btn head_tool_dropdown_btn h_t_i_singlepage" data-bind="click: toggleDropDownMenu" href="#" data-tooltip="View Mode" data-localize-tooltip="ViewMode"></a>         <ul class="dropdown-menu head_tool_dropdown" style="display: none;" data-bind="style: {display: (dropDownMenuIsVisible() ? \'block\' : \'none\')}">             <li style="display: inline">                    <a data-bind="click: openScrollView" href="#">                      <span class="h_t_d_i_scroll"></span>                        <p data-localize="ScrollView">Scroll View</p>                   </a>                </li>               <li style="display: inline" name="openDoublePageFlipViewMenuItem">                  <a data-bind="click: openDoublePageFlipView" href="#">                      <span class="h_t_d_i_double"></span>                        <p data-localize="BookMode">Double Page Flip</p>                    </a>                </li>               <li style="display: inline">                    <a data-bind="click: openOnePageInRowView" href="#">                        <span class="h_t_d_i_scroll"></span>                        <p data-localize="OnePageInRow">One Page in Row</p>                 </a>                </li>               <li style="display: inline">                    <a data-bind="click: openTwoPagesInRowView" href="#">                       <span class="h_t_d_i_double"></span>                        <p data-localize="TwoPagesInRow">Two Pages in Row</p>                   </a>                </li>               <li style="display: inline">                    <a data-bind="click: openCoverThenTwoPagesInRowView" href="#">                      <span class="h_t_d_i_double"></span>                        <p data-localize="CoverThenTwoPagesInRow">Cover then Two Pages in Row</p>                   </a>                </li>           </ul>       </div>      <div name="search_wrapper" class="new_head_tools_wrapper" data-bind="visible:visible">      </div>'+(s.supportPageRotation?'<div class="new_head_tools_wrapper">      <a name="rotateClockwise" class="h_t_i_rotatecl new_head_tools_btn" data-tooltip="Rotate Clockwise" data-localize-tooltip="RotateClockwise"></a>      <a name="rotateCounterClockwise" class="h_t_i_rotatecon new_head_tools_btn" data-tooltip="Rotate Counter-Clockwise" data-localize-tooltip="RotateCounterClockwise"></a></div>':"")+'   </div></div><div class="fileOpenDialogWrapper" style="display: none"></div><div class="viewer_mainwrapper '+v+'">   <div id='+s.docViewerId+' class="doc_viewer" data-bind="event: { scroll: function(item, e) { this.ScrollDocView(item, e); }, scrollstop: function(item, e) { this.ScrollDocViewEnd(item, e);e.returnValue = false;return true; } }">   </div>   <div class="doc_viewer_wrapper_page_flip" style="overflow: auto; top: -50000px; position: absolute;height: 100%">   </div>'+(s.showThumbnails?'   <a class="thumbs_btn" href="#"></a>':"")+'</div><div name="jGDerror" class="modal_dialog_wrapper jerrorwrapper">   <div class="modal_dialog_overlay">       &nbsp;   </div>   <div class="modal_dialog_content_wrapper">       <div class="modal_dialog_header">          Error       </div>       <div class="modal_dialog_content">       </div>   </div></div><div name="messageDialog" class="modal_dialog_content_wrapper modal_progressbar" style="display:none">   <a name="minimizeButton" class="icon_minimize" href="#">&ndash;</a>   <a name="maximizeButton" class="icon_maximize" href="#">+</a>   <div class="modal_dialog_header">      <span name="alwaysVisibleTitle">Printing </span>      <span name="visibleWhenMinimizedTitle" class="percent">0%</span>   </div>   <div class="modal_dialog_content">      <p data-localize="PreparingPages" name="message">Preparing the pages</p>      <div class="progressbar">      <div style="width: 50%" class="progress"></div></div>   </div></div><div name="messageDialogPdf" class="modal_dialog_content_wrapper modal_progressbar" style="display:none">   <a name="minimizeButtonPdf" class="icon_minimize" href="#">&ndash;</a>   <a name="maximizeButtonPdf" class="icon_maximize" href="#">+</a>   <div class="modal_dialog_header">      <span name="alwaysVisibleTitlePdf">Printing </span>   </div>   <div class="modal_dialog_content">      <p data-localize="PreparingPages" name="messagePdf">Preparing the pages</p>   </div></div></div>').appendTo(e(this))})}this.groupdocsViewerWrapper=r=a.find(".groupdocs_viewer_wrapper");var _=this.viewerHeader=r.find(".viewer_header"),b=this.viewerMainWrapper=r.find(".viewer_mainwrapper");if(s.showHeader||(_.height(0),b.css("top","0")),i.enableViewerInit){""==s.filePath&&(s.openThumbnails=!1);var V="#"+s.docViewerId,P=e(V),M=r.find("[name='search_wrapper']");s.useHtmlBasedEngine&&(_.find("li[name='openDoublePageFlipViewMenuItem']").hide(),s.supportTextSelection||(d="."+g+" .html_pages_container{-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}",e("<style>"+d+"</style>").appendTo("head"),this.browserIsInternetExplorer&&P.on("selectstart",function(e){return e.preventDefault(),!0})),s.supportPageReordering=!1);var D,I;D=s.width?s.width:a.width(),r.width(D),I=s.height?s.height:a.height(),r.height(I);var C=null;s.useHtmlBasedEngine||(C=r.find("[name='selection-content']"),0==C.length&&(C=e("<textarea readonly='readonly' rows='1' cols='1' name='selection-content'></textarea>'").appendTo(r)));var y=r.find("[name='jGDerror']");y.find(".modal_dialog_overlay").click(function(){y.hide()});var S=r.find(".navigation-bar"),k=r.find(".zoom_wrappper"),T=r.find(".doc_viewer_wrapper_page_flip"),F=this.fileOpenDialogWrapper=r.find(".fileOpenDialogWrapper");if(!s.supportTextSelection){var z=V+" .ui-selectable-helper {display: none;visibility: hidden}";e("<style>"+z+"</style>").appendTo("head")}var A;if(s.thumbnailsContainerWidth){var x=203,H=150,B=187,W=this.getScrollbarWidth(),E=Math.round(s.thumbnailsContainerWidth),R=(x-W)/(E-W);A=Math.round(H/R);var O=Math.round(B/R);d="div.thumbnailsContainer{width:"+E+"px}",d+="div.thumbnailsContainer ul li img{width:"+A+"px}",d+="div.thumbnailsContainer ul li{min-width:"+O+"px}",d+=".thumbs_btn_slide{left:"+(E+2)+"px}",e("<style>"+d+"</style>").appendTo("head")}d="",s.searchHighlightColor&&(d+="."+g+" .search_highlight_html, ."+g+" .search-highlight {background-color:"+s.searchHighlightColor+"; fill:"+s.searchHighlightColor+"}"),s.currentSearchHighlightColor&&(d+=".grpdx."+g+" .current_search_highlight {background-color:"+s.currentSearchHighlightColor+"; fill:"+s.currentSearchHighlightColor+"}"),s.useEmScaling&&(d+=".grpdx."+g+" .html_page_contents {transform-origin:initial}"),d&&e("<style>"+d+"</style>").appendTo("head"),P.bind("onHtmlCreated",o),S.bind("onHtmlCreated",o),k.bind("onHtmlCreated",o),T.bind("onHtmlCreated",o),F.bind("onHtmlCreated",o);var L,j={createHtml:!0,viewerElement:P,useCaseSensitiveSearch:s.useCaseSensitiveSearch,searchForSeparateWords:s.searchForSeparateWords,treatPhrasesInDoubleQuotesAsExactPhrases:s.treatPhrasesInDoubleQuotesAsExactPhrases,useHtmlBasedEngine:s.useHtmlBasedEngine,searchIsVisible:s.showSearch,useRtl:s.useRtl,useAccentInsensitiveSearch:s.useAccentInsensitiveSearch,useVirtualScrolling:s.useVirtualScrolling};L=s.useHtmlBasedEngine?20:s.quality;var U,N={createHtml:!0,thumbnailWidth:A,quality:L,useHtmlBasedEngine:s.useHtmlBasedEngine,useHtmlThumbnails:s.useHtmlThumbnails,useInnerThumbnails:s.useInnerThumbnails,supportPageReordering:s.supportPageReordering,use_pdf:s.supportTextSelection?"true":"false",ignoreDocumentAbsence:s.ignoreDocumentAbsence,supportPageRotation:s.supportPageRotation,openThumbnails:s.openThumbnails,instanceIdToken:s.instanceIdToken,locale:s.locale,_mode:"webComponent"};U=s.showThumbnails?b:null;var Z={watermarkText:s.watermarkText,watermarkColor:s.watermarkColor,watermarkPosition:s.watermarkPosition,watermarkWidth:s.watermarkWidth,preventTouchEventsBubbling:s.preventTouchEventsBubbling,searchForSeparateWords:s.searchForSeparateWords,treatPhrasesInDoubleQuotesAsExact:s.treatPhrasesInDoubleQuotesAsExact,usePngImagesForHtmlBasedEngine:s.usePngImagesForHtmlBasedEngine,alwaysOnePageInRow:s.showOnePageInRow||s.viewerStyle==window.groupdocs.OnePageInRow,onlyShrinkLargePages:s.onlyShrinkLargePages,loadAllPagesOnSearch:s.loadAllPagesOnSearch,useEmScaling:s.useEmScaling,convertWordDocumentsCompletely:s.convertWordDocumentsCompletely,ignoreDocumentAbsence:s.ignoreDocumentAbsence,usePdf:s.supportTextSelection,preloadPagesOnBrowserSide:s.preloadPagesOnBrowserSide,supportPageRotation:s.supportPageRotation,useAccentInsensitiveSearch:s.useAccentInsensitiveSearch,useRtl:s.useRtl,viewerLayout:s.viewerStyle,useVirtualScrolling:s.useVirtualScrolling,supportListOfContentControls:s.supportListOfContentControls,supportListOfBookmarks:s.supportListOfBookmarks,embedImagesIntoHtmlForWordFiles:s.embedImagesIntoHtmlForWordFiles,instanceIdToken:s.instanceIdToken,browserIsIE9OrLess:l,locale:s.locale,passwordForOpening:s.passwordForOpening,saveFontsInAllFormats:s.saveFontsInAllFormats},G="onMenuClicked",Q=r.find(".viewTypeMenu"),q={dropDownMenuIsVisible:ko.observable(!1),dropDownMenuClicked:!1,openScrollView:function(){m.setMultiplePagesInRowLayout()},openDoublePageFlipView:function(){m.openDoublePageFlipView()},openOnePageInRowView:function(){m.openOnePageInRowView()},openTwoPagesInRowView:function(){m.openTwoPagesInRowView()},openCoverThenTwoPagesInRowView:function(){m.openCoverThenTwoPagesInRowView()},showDropDownMenu:function(e){this.dropDownMenuIsVisible(e)},toggleDropDownMenu:function(e,i){this.dropDownMenuIsVisible(!this.dropDownMenuIsVisible()),this.dropDownMenuClicked=!0,Q.trigger(G),i.stopPropagation()}},J=this.viewerAdapter=new DocViewerAdapter({fileId:s.filePath,fileVersion:"0",quality:s.quality,use_pdf:s.supportTextSelection?"true":"false",docSpace:P,_mode:"webComponent",createHtml:!0,initialZoom:s.initialZoom,viewerWidth:D,viewerHeight:b.height(),docViewerId:s.docViewerId,zoomToFitWidth:s.zoomToFitWidth,zoomToFitHeight:s.zoomToFitHeight,navigation:S,navigationOptions:{createHtml:!0},thumbnails:U,thumbnailsOptions:N,zooming:k,zoomingOptions:{createHtml:!0},search:M,searchOptions:j,preloadPagesCount:s.preloadPagesCount,docSpacePageFlip:s.useHtmlBasedEngine||s.viewerStyle==this.viewModes.ScrollMode&&!s.showViewerStyleControl?null:T,usePageNumberInUrlHash:!1,selectionContent:C,imageHorizontalMargin:14,imageVerticalMargin:14,useJavaScriptDocumentDescription:!0,searchPartialWords:!0,variableHeightPageSupport:!0,textSelectionSynchronousCalculation:!1,minimumImageWidth:s.minimumImageWidth,fileDisplayName:s.fileDisplayName,pageContentType:s.useHtmlBasedEngine?"html":"image",searchExactText:s.searchExactText,viewerOptions:Z,viewTypeMenu:Q,viewTypeViewModel:q,instanceId:this.viewerId});if(s.showFolderBrowser){var $={hostUrl:s.hostUrl,userId:s.userId,userKey:s.userKey,fileExplorer:r.find(".file_browser_content"),fileUploader:r.find(".file_browser_toolbar"),resourcePrefix:s.resourcePrefix,urlHashEnabled:!1,instanceIdToken:s.instanceIdToken};F.fileOpenDialog($),F.find(".popclose").click(function(){m._hideFileOpenDialog()})}o();var K=a.find(".thumbs_btn");s.useInnerThumbnails&&K.hide(),t(),K.click(function(){return e(this).toggleClass("thumbs_btn_slide"),a.find(".thumbnailsContainer").toggle(),e.browser.msie&&(K.css("background-image",""),t()),!1}),r.find(".btnOpen").click(function(){m._showFileOpenDialog()}),r.find("[name=rotateClockwise]").click(function(){m._rotatePage(90)}),r.find("[name=rotateCounterClockwise]").click(function(){m._rotatePage(-90)}),r.find(".file_browser_content").bind("fileSelected",function(e,i){m._hideFileOpenDialog(),m.fileDisplayName=J.docViewerViewModel.fileDisplayName="",J.docViewerViewModel.loadDocument(i.path)}),s.showThumbnails&&s.openThumbnails&&(a.find(".thumbs_btn").addClass("thumbs_btn_slide"),a.find(".thumbnailsContainer").css("display","block")),ko.applyBindings(q,Q.get(0)),e("html").click(function(){m.viewerAdapter.zoomViewModel&&m.viewerAdapter.zoomViewModel.showDropDownMenu(!1),q.showDropDownMenu(!1)}),s.backgroundColor&&(a.find(".groupdocs_viewer_wrapper").css("background-color",s.backgroundColor),_.css("background-color",s.backgroundColor),a.find(".new_head_input").css("background-color",s.backgroundColor),a.find(".new_head_tools_wrapper").css("background-color",s.backgroundColor).css("box-shadow","none"),a.find(".thumbs_btn").css("background-color",s.backgroundColor)),a.find(".btnOpen").css("display",s.showFolderBrowser?"":"none"),a.find(".navigation-bar").css("display",s.showPaging?"":"none"),k.css("display",s.showZoom?"":"none"),a.find(".btn_download").css("display",s.showDownload?"":"none"),a.find(".print_button").css("display",s.showPrint?"":"none"),a.find(".viewTypeMenu").css("display",s.showViewerStyleControl?"":"none"),s.showPrint===!1&&s.showDownload===!1&&a.find("[name='printAndDownloadToolbar']").css("display","none"),s.showSearch===!1&&M.css("display","none");var Y="";if(s.toolbarButtonsBoxShadowStyle){var X="box-shadow",ee=n(".grpdx .new_head_tools_btn",X,s.toolbarButtonsBoxShadowStyle);Y+=ee,s.toolbarButtonsBoxShadowHoverStyle&&(ee=n(".grpdx .new_head_tools_btn:hover",X,s.toolbarButtonsBoxShadowHoverStyle),Y+=ee)}s.thumbnailsContainerBackgroundColor&&(Y+=".grpdx div.thumbnailsContainer{background-color:"+s.thumbnailBackgroundColor+"}\r\n"),s.toolbarBorderBottomColor&&(Y+=".grpdx .viewer_header{border-bottom-color:"+s.toolbarBorderBottomColor+"}\r\n"),s.thumbnailsContainerBorderRightColor&&(Y+=".grpdx div.thumbnailsContainer{border-right-color:"+s.thumbnailsContainerBorderRightColor+"}\r\n"),s.toolbarInputFieldBorderColor&&(Y+=".grpdx .new_head_input{border-color:"+s.toolbarInputFieldBorderColor+"}\r\n"),s.toolbarButtonBorderColor&&(Y+=".grpdx .new_head_tools_btn{border-color:"+s.toolbarButtonBorderColor+"}\r\n"),s.useInnerThumbnails&&(Y+=".grpdx #"+s.docViewerId+"{display: inline-block}\r\n"),e("<style>"+Y+"</style>").appendTo("head"),P.bind("onDocumentLoadComplete",function(e,i){m.documentLoadCompleteHandler(i,r,b)}),P.bind("onDocumentLoaded",function(e,i){m.documentLoadedHandler(i,r,b)}),P.bind("isDocumentSinglePaged.groupdocs",function(e,i){m.documentSinglePagedHandler(i,S)}),s.viewerStyle==this.viewModes.BookMode?q.openDoublePageFlipView():this.viewMode=this.viewModes.ScrollMode;var ie=r.find("[name='jGDerror']"),oe=ie.find(".modal_dialog_content"),te=ie.find(".modal_dialog_content_wrapper"),ne=ie.find(".modal_dialog_header");ie.removeClass("jerrorwrapper");var re=r.find(".viewer_mainwrapper");window.jGDError||(window.jGDError=new Array),window.jGDError[this.viewerId]=function(i){if(e(a).trigger("error.groupdocs",i),s.enableStandardErrorHandling){var o=r.find(".btn_download");o.unbind(),o.bind({click:function(){return m._downloadDocument(),!1}}),i=i.replace(/^[\r\n\s]+|[\r\n\s]+$/g,""),i||(i="Sorry, we're unable to perform your request right now. Please try again later."),ie.css("height","auto"),ne.text("Error");var t,n;if("<"==i.substring(0,1)){oe.html(i);var l=re.width(),d=re.height();t=100>l?l:l-100,n=100>d?d:d-100}else oe.text(i);void 0!=t&&(te.css("margin-left",-t/2),te.width(t)),void 0!=n&&te.height(n),ie.show(),te.css("margin-left",-te.width()/2),te.css("margin-top",-te.height()/2)}};var ae=this.groupdocsViewerWrapper.find("[name='messageDialog']"),se=ae.find("[name='minimizeButton']"),le=ae.find("[name='maximizeButton']");se.click(function(){ae.addClass("min")}),le.click(function(){ae.removeClass("min")});var de=this.groupdocsViewerWrapper.find("[name='messageDialogPdf']"),ce=de.find("[name='minimizeButtonPdf']"),pe=de.find("[name='maximizeButtonPdf']");ce.click(function(){de.addClass("min")}),pe.click(function(){de.removeClass("min")}),this.resizeHandler()}},documentLoadedHandler:function(i,o,t){this.printFrameLoaded=!1;var n=e("body"),r="printFrame"+this.viewerId,a=n.children("div.groupdocsPrintFrame[name='"+r+"'],div.groupdocsPrintFrameDeactivated[name='"+r+"']");0==a.length?(a=e("<div class='groupdocsPrintFrameDeactivated'></div>"),a.attr("name",r),a.appendTo(n)):a.empty(),this.printImageElements.length=0;var s=i.page_count;!i.lic&&s>3&&(s=3);for(var l,d=0;s>d;d++)l=e("<img/>").appendTo(a),this.printImageElements.push(l);if(!i.lic&&0==o.find(".licBanner").length){t.addClass("viewer_mainwrapper_trial"),this.licElement=e("<div/>"),this.licElement.addClass("banner_trial"),this.showHeader||this.licElement.css("top","0");var c=this._getLocalizedString("This viewer has been created using an unlicensed version of ","UnlicensedViewer");this.licElement.html(c+" <a href='http://groupdocs.com' target='_blank'>GroupDocs.Annotation</a> for Java v2.14.0"),this.licElement.appendTo(o),this.showHeader||t.css("top",this.licElement.height()+"px"),this.resizeHandler()}},documentLoadCompleteHandler:function(e,i,o){var t=this;this.showImageWidth&&alert("Image width: "+e.page_size.Width),this.downloadUrl=e.url,this.pdfDownloadUrl=e.pdfDownloadUrl,this.pdfPrintUrl=e.pdfPrintUrl,this.documentPath=e.guid;var n=i.find(".btn_download"),r=i.find(".print_button");n.unbind(),r.unbind(),n.bind({click:function(){return t._downloadDocument(),!1}}),r.bind({click:function(){return t._printDocument(),!1}})},documentSinglePagedHandler:function(e,i){this.showPaging&&(e?i.hide():i.show())},_localizeElements:function(){var i=this;null!=this.localizedStrings&&i.element.find("[data-localize],[data-localize-ph],[data-localize-tooltip]").each(function(){var o,t=e(this),n=t.attr("data-localize");n?(o=i.localizedStrings[n],t.text(o)):(n=t.attr("data-localize-ph"),n?(o=i.localizedStrings[n],t.attr("placeholder",o)):(n=t.attr("data-localize-tooltip"),n&&(o=i.localizedStrings[n],t.attr("data-tooltip",o))))})},getScrollbarWidth:function(){var i=null,o=e("<div/>").css("width","100px").css("height","100px").css("overflow","scroll").css("position","absolute").css("top","-9999px"),t=o[0];return document.body.appendChild(t),i=t.offsetWidth-t.clientWidth,document.body.removeChild(t),i},resizeHandler:function(){if(this.showHeader){var e=this.viewerHeader.outerHeight(!0),i=0;if(this.licElement&&(i=this.licElement.height()),e!=this.viewerMainWrapper.position().top-i){var o=e;this.licElement&&(this.licElement.css("top",o.toString()+"px"),o+=i),this.viewerMainWrapper.css("top",o.toString()+"px"),this.viewMode==this.viewModes.BookMode?this.viewerAdapter.docViewerPageFlipViewModel.reInitSelectable():this.viewerAdapter.docViewerViewModel.reInitSelectable()}}if(this.useInnerThumbnails){var t=0,n=this.viewerAdapter.thumbnailsViewModel;n&&(t=n.getThumbnailsPanelWidth()),this.viewMode==this.viewModes.BookMode?this.viewerAdapter.docViewerPageFlipViewModel.resizeViewerElement(t):this.viewerAdapter.docViewerViewModel.resizeViewerElement(t)}else this.viewerAdapter.docViewerViewModel.loadImagesForVisiblePages();this._setFitWidthAndHeightValues()},resizeHandlerWithDelay:function(){this.resizeTimeoutId&&clearTimeout(this.resizeTimeoutId);var e=this;this.resizeTimeoutId=window.setTimeout(function(){e.resizeHandler()},1e3)},setWidth:function(e){this.groupdocsViewerWrapper.width(e),this.resizeHandler(),this.resizeHandlerWithDelay()},setHeight:function(e){this.groupdocsViewerWrapper.height(e),this.resizeHandler(),this.resizeHandlerWithDelay()},_showFileOpenDialog:function(){var i=this;this.fileOpenDialogWrapper.addClass("in"),this.fileOpenDialogWrapper.show(),this.backdrop=e('<div class="modal-backdrop fade" />').appendTo(this.groupdocsViewerWrapper),this.backdrop.click(function(){i._hideFileOpenDialog()}),this.backdrop.addClass("in")},_hideFileOpenDialog:function(){this.backdrop.removeClass("in"),this.backdrop.remove(),this.fileOpenDialogWrapper.hide()},_rotatePage:function(e){this.viewerAdapter.docViewerViewModel.rotatePage(e)},openScrollView:function(){var e=this.groupdocsViewerWrapper.find(".doc_viewer"),i=this.groupdocsViewerWrapper.find(".doc_viewer_wrapper_page_flip");i.css("position","absolute"),i.css("height","100%"),i.hide(),e.show(),this.viewerAdapter.docViewerViewModel.openCurrentPage(),this.viewerAdapter.search&&this.viewerAdapter.searchViewModel.showControls()},setMultiplePagesInRowLayout:function(){this.openScrollView(),this.viewerAdapter.docViewerViewModel.setLayout(window.groupdocs.ScrollMode),this.viewerAdapter.docViewerViewModel.reInitSelectable(),this._setFitWidthAndHeightValues(),this.viewMode=this.viewModes.ScrollMode},openDoublePageFlipView:function(){if(!this.useHtmlBasedEngine){var e=this.groupdocsViewerWrapper.find(".doc_viewer"),i=this.groupdocsViewerWrapper.find(".doc_viewer_wrapper_page_flip");i.css("display","inline-block"),this.viewerAdapter.docViewerViewModel.setLayout(window.groupdocs.BookMode),this.viewerAdapter.docViewerPageFlipViewModel.openCurrentPage(),i.css("height",""),i.css("top",""),i.css("position",""),e.hide(),this.viewMode=this.viewModes.BookMode,this.resizeHandler(),this.viewerAdapter.docViewerPageFlipViewModel.reInitSelectable(),this._setFitWidthAndHeightValues(!0),this.viewerAdapter.search&&this.viewerAdapter.searchViewModel.hideControls()}},openOnePageInRowView:function(){this.openScrollView(),this.viewerAdapter.docViewerViewModel.setLayout(window.groupdocs.OnePageInRow),this.viewerAdapter.docViewerViewModel.reInitSelectable(),this.useHtmlBasedEngine||this.viewerAdapter.docViewerViewModel.openCurrentPage()},openTwoPagesInRowView:function(){this.openScrollView(),this.viewerAdapter.docViewerViewModel.setLayout(window.groupdocs.TwoPagesInRow),this.viewerAdapter.docViewerViewModel.reInitSelectable(),this.useHtmlBasedEngine||this.viewerAdapter.docViewerViewModel.openCurrentPage()},openCoverThenTwoPagesInRowView:function(){this.openScrollView(),this.viewerAdapter.docViewerViewModel.setLayout(window.groupdocs.CoverThenTwoPagesInRow),this.viewerAdapter.docViewerViewModel.reInitSelectable(),this.useHtmlBasedEngine||this.viewerAdapter.docViewerViewModel.openCurrentPage()},_downloadDocument:function(){this.element.trigger("onGDViewerDownloadButtonClick"),this.element.trigger("downloadButtonClick.groupdocs");var i=this.downloadUrl;if(null==i){var o=this._model._portalService._urlSuffix||"";i=this.applicationPath+"/document-viewer/GetFile"+o+"?path="+this.filePath+"&getPdf=false&useHtmlBasedEngine=false&supportPageRotation=false"}return this.downloadPdfFile&&"undefined"!=typeof this.pdfDownloadUrl&&(i=this.pdfDownloadUrl),this.showDownloadErrorsInPopup?e.fileDownload(i,{failCallback:function(e,i){window.jGDError(e)},cookieName:self.jqueryFileDownloadCookieName,containerElement:this.groupdocsViewerWrapper}):window.location.href=i,!1},_printDocument:function(){var i,o,t=this;if(this.usePdfPrinting){i=this._getLocalizedString("Printing","Printing"),o=this._getLocalizedString("Printing","Printing"),this._showMessageDialogPdf(i,o);var n=window.open(this.pdfPrintUrl),r=function(){t._hideMessageDialogPdf()};this.browserIsChrome?n.onload=r:window.setTimeout(r,1e3)}else{var a=navigator.userAgent.toLowerCase(),s=a.indexOf("android")>-1;s&&alert("You seem to use an Android device. Your browser does not support the JavaScript print function.");var l="";this.fileDisplayName&&(l=this.fileDisplayName);var d=this.useHtmlBasedEngine&&!this.useImageBasedPrinting,c=e("body"),p="printFrame"+this.viewerId,h=c.children("div.groupdocsPrintFrame[name='"+p+"'],div.groupdocsPrintFrameDeactivated[name='"+p+"']"),w=c.children("div.groupdocsPrintFrame,div.groupdocsPrintFrameDeactivated").not(h);w.removeClass("groupdocsPrintFrame"),w.addClass("groupdocsPrintFrameDeactivated"),h.removeClass("groupdocsPrintFrameDeactivated"),h.addClass("groupdocsPrintFrame");var u=null,g=null,m=this.watermarkPosition,v=null;this.printWithWatermark&&(u=this.watermarkText,g=this.watermarkColor,v=this.watermarkWidth),0==h.length&&(h=e("<div class='groupdocsPrintFrame'></div>"),h.attr("name",p),h.appendTo(c)),this.printFrameLoaded?window.print():(i=this._getLocalizedString("Getting a printable version of the document","GettingPrintableVersionOfDocument"),o=this._getLocalizedString("Printing","Printing"),this._showMessageDialog(i,o,0),this._model.getPrintableHtml(this.documentPath,d,l,this.quality,this.supportTextSelection,u,g,m,v,this.ignoreDocumentAbsence,this.instanceIdToken,function(i){function n(){l++,t._updateMessageDialog(s+l+"/"+a,o,l/a*100),l>=a&&(t._hideMessageDialog(),window.print(),t.printFrameLoaded=!0)}t._hideMessageDialog();var r,a=i.length,s=t._getLocalizedString("Preparing the pages","PreparingPages");s+=": ";var l=0;t._showMessageDialog(s+l+"/"+a,o,0);var d,c=t.printImageElements.length;for(d=c;a>d;d++){var p;p=e("<img/>").appendTo(h),t.printImageElements.push(p)}for(d=0;d<t.printImageElements.length;d++){var w;r=i[d],w=t.printImageElements[d],w.load(n).attr("src",r)}},function(e){t._hideMessageDialog()},this.locale))}return!1},_showMessageDialog:function(e,i,o){var t=this._updateMessageDialog(e,i,o);t.show()},_updateMessageDialog:function(e,i,o){var t=this.groupdocsViewerWrapper.find("[name='messageDialog']"),n=t.find(".modal_dialog_content p[name='message']");n.text(e);var r=t.find(".modal_dialog_header"),a=r.find("span[name='alwaysVisibleTitle']");a.text(i);var s=t.find(".progress");if("undefined"!=typeof o){var l=Math.round(o)+"%";s.css("width",l);var d=r.find("span[name='visibleWhenMinimizedTitle']");d.text(l)}return t},_hideMessageDialog:function(){var e=this.groupdocsViewerWrapper.find("[name='messageDialog']");e.hide()},_showMessageDialogPdf:function(e,i){var o=this._updateMessageDialogPdf(e,i);o.show()},_updateMessageDialogPdf:function(e,i){var o=this.groupdocsViewerWrapper.find("[name='messageDialogPdf']"),t=o.find(".modal_dialog_content p[name='message']");t.text(e);var n=o.find(".modal_dialog_header"),r=n.find("span[name='alwaysVisibleTitlePdf']");return r.text(i),o},_hideMessageDialogPdf:function(){var e=this.groupdocsViewerWrapper.find("[name='messageDialogPdf']");e.hide()},_getLocalizedString:function(e,i){var o=e;if(this.localizedStrings){var t=this.localizedStrings[i];t&&(o=t)}return o},_setFitWidthAndHeightValues:function(e){if(this.viewerAdapter.zooming){var i,o,t,n;e?(t=this.viewerAdapter.docViewerPageFlipViewModel.getFitWidthZoom(),n=this.viewerAdapter.docViewerPageFlipViewModel.getFitHeightZoom()):(i=this.groupdocsViewerWrapper.width(),this.viewerAdapter.docViewerViewModel.setContainerWidth(i),o=this.viewerMainWrapper.height(),this.viewerAdapter.docViewerViewModel.setContainerHeight(o),t=this.viewerAdapter.docViewerViewModel.getFitWidthZoom(),n=this.viewerAdapter.docViewerViewModel.getFitHeightZoom()),this.viewerAdapter.zoomViewModel.setFitWidthZoom(t),this.viewerAdapter.zoomViewModel.setFitHeightZoom(n)}},openNextPage:function(){this.viewerAdapter.navigationViewModel.down()},openPreviousPage:function(){this.viewerAdapter.navigationViewModel.up()},setPage:function(e){this.viewerAdapter.navigationViewModel.selectPage(e)},openFirstPage:function(){this.viewerAdapter.navigationViewModel.openFirstPage()},openLastPage:function(){this.viewerAdapter.navigationViewModel.openLastPage()},showFileBrowser:function(){this._showFileOpenDialog()},setViewerMode:function(e){switch(e){case window.groupdocs.ScrollMode:this.openScrollView();break;case window.groupdocs.BookMode:this.openDoublePageFlipView();break;case window.groupdocs.OnePageInRow:this.openOnePageInRowView();break;case window.groupdocs.TwoPagesInRow:this.openTwoPagesInRowView();break;case window.groupdocs.CoverThenTwoPagesInRow:this.openCoverThenTwoPagesInRowView()}},zoomIn:function(){this.viewerAdapter.zoomViewModel.zoomIn()},zoomOut:function(){this.viewerAdapter.zoomViewModel.zoomOut()},setZoom:function(e){var i=e;switch(e){case window.groupdocs.FitWidth:i=this.viewerAdapter.zoomViewModel.getFitWidthZoomValue();break;case window.groupdocs.FitHeight:i=this.viewerAdapter.zoomViewModel.getFitHeightZoomValue()}this.viewerAdapter.zoomViewModel.setZoom({value:i})},downloadDocument:function(){this._downloadDocument()},printDocument:function(){this._printDocument()},searchForward:function(e,i,o,t){this.viewerAdapter.searchViewModel.searchValue()!=e&&(this.viewerAdapter.searchViewModel.searched=!1),
this.viewerAdapter.searchViewModel.searchValue(e),this.viewerAdapter.searchViewModel.findNext(i,o,t)},searchBackward:function(e,i,o,t){this.viewerAdapter.searchViewModel.searchValue()!=e&&(this.viewerAdapter.searchViewModel.searched=!1),this.viewerAdapter.searchViewModel.searchValue(e),this.viewerAdapter.searchViewModel.findPrevious(i,o,t)},clearSearchValue:function(){this.viewerAdapter.searchViewModel.clearValue()},getDocumentPageCount:function(){return this.viewerAdapter.docViewerViewModel.pageCount()},loadDocument:function(e){this.viewerAdapter.docViewerViewModel.loadDocument(e)},setLoadingState:function(e){this.viewerAdapter.docViewerViewModel.setLoadingState(e)},getContentControlDescriptions:function(){return this.viewerAdapter.docViewerViewModel.getContentControlDescriptions()},navigateToContentControl:function(e){this.viewerAdapter.docViewerViewModel.navigateToContentControl(e)},destroy:function(){var i=this.groupdocsViewerWrapper.find(".doc_viewer_wrapper_page_flip .pages_container_flip");0!=i.length&&i.turn("is")&&i.turn("destroy"),this.groupdocsViewerWrapper.remove(),e.Widget.prototype.destroy.call(this.widgetInstance)}});var i=function(i){e.extend(this,i),this._init()};e.extend(i.prototype,{_portalService:null,_init:function(){this._portalService=Container.Resolve("PortalService")},getPrintableHtml:function(e,i,o,t,n,r,a,s,l,d,c,p,h,w){this._portalService.getImageUrlsAsync(null,null,e,null,null,0,null,t,n,null,r,a,s,l,d,i,!1,function(e){p.apply(this,[e.data.imageUrls])},function(e){h.apply(this,[e])},c,w)}}),e.support.cors=!0,jQuery.browser||(jQuery.browser={},function(){if(jQuery.browser.msie=!1,jQuery.browser.version=0,"Microsoft Internet Explorer"==navigator.appName)navigator.userAgent.match(/MSIE ([0-9]+)\./)&&(jQuery.browser.msie=!0,jQuery.browser.version=RegExp.$1);else if("Netscape"==navigator.appName){var e=navigator.userAgent,i=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");null!=i.exec(e)&&(jQuery.browser.msie=!0,jQuery.browser.version=RegExp.$1)}}()),window.groupdocs.ScrollMode=1,window.groupdocs.BookMode=2,window.groupdocs.OnePageInRow=3,window.groupdocs.TwoPagesInRow=4,window.groupdocs.CoverThenTwoPagesInRow=5,window.groupdocs.FitWidth=-1,window.groupdocs.FitHeight=-2,window.groupdocs.viewerId=1}(jQuery);